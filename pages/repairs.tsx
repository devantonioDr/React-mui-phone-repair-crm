import Grid from "@mui/material/Grid";
import type { NextPage } from "next";
import Head from "next/head";
import SearchFilters from "../components/repairSearchFilters";
import RepairsTable from "../components/repairsList";

import { useTheme } from "@mui/material/styles";
import useMediaQuery from "@mui/material/useMediaQuery";
import RepairsListTopOptions from "../components/repairsListTopOptions";
import MainLayout from "../components/layouts/mainLayout";
import { RepairListContextProvider } from "../components/repairsList/context";
import { InsertRepairContextProvider } from "../context/InsertRepairContextProvider";

const responsibeGrid = {
  stacked: [
    [12], //First Row
    [12], //Seconds Row
  ],
  normal: [
    [3], //First Row
    [9], //Seconds Row
  ],
};

const Repairs: NextPage = () => {
  const theme = useTheme();
  const fullScreen = useMediaQuery(theme.breakpoints.down("md"));

  const mode = fullScreen
    ? responsibeGrid["stacked"]
    : responsibeGrid["normal"];
  const title = "Reparaciones";
  return (
    <>
      <Head>
        <title>{title}</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <MainLayout title={title}>
        <InsertRepairContextProvider>
          <RepairListContextProvider>
            <RepairsListTopOptions />

            <Grid container spacing={2}>
              <Grid item xs={mode[0][0]}>
                <SearchFilters />
              </Grid>
              <Grid item xs={mode[1][0]}>
                <RepairsTable />
              </Grid>
            </Grid>
          </RepairListContextProvider>
        </InsertRepairContextProvider>
      </MainLayout>
    </>
  );
};

export default Repairs;
